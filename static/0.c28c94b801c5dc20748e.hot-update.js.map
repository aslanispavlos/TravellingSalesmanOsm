{"version":3,"file":"0.c28c94b801c5dc20748e.hot-update.js","sources":["/Users/marc/git/uni/osm-fapra/react-client/src/js/components/MapView.js"],"sourcesContent":["import React, {createRef} from 'react';\nimport {bindActionCreators} from 'redux';\nimport { connect } from 'react-redux';\nimport * as coreActions from '../services/core/actions';\nimport {Map, TileLayer, Marker, Popup, Polyline} from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport '../../css/components/TSPComponent.css'\nimport '../../css/components/MapView.css'\n\n\nimport RoutingMap from './RoutingMap'\nimport TspMap from './TspMap'\nimport MarkerComponent from './MarkerComponent'\nimport '../../css/components/SidebarContent.css'\n\n// Making markers work without having to use the google CDN\n// https://github.com/PaulLeCam/react-leaflet/issues/453\nimport L from 'leaflet';\nimport { faTextHeight } from '@fortawesome/free-solid-svg-icons';\n\ndelete L.Icon.Default.prototype._getIconUrl;\n\nL.Icon.Default.mergeOptions({\n    iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n    iconUrl: require('leaflet/dist/images/marker-icon.png'),\n    shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\n\nclass MapView extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\t\tthis.props.coreActions.get_current_geolocation();\n\t\t\tthis.clearMarkers = this.clearMarkers.bind(this)\n\t}\n\tmapRef = createRef()\n\n\thandleMapClick = e => {\n\t\t\tthis.props.coreActions.addMarker(e.latlng, \"standard\")\n\t}\n\n\tlongitudes = [8, 9, 10, 11]\n\tlatitudes = [38, 39 , 40, 41]\n\t\t\n\n\n\trenderClickMarkers(){\n\t\treturn this.props.markers.map((marker, i) => {\n\t\t\t\treturn (\n\t\t\t\t<MarkerComponent\n\t\t\t\tkey={i} \n\t\t\t\tcoord={marker.latlng} \n\t\t\t\ttype={marker.type}\n\t\t\t\tmarker={marker}\n\t\t\t\tindex={i}/>\n\t\t\t\t)\n\t\t})\n\t}\n\n\tclearMarkers(){\n\t\tthis.props.coreActions.clearMarkers();\n\t}\n\n\trenderMap(){\n\t\tif (this.props.appState === \"tsp\"){\n\t\t\treturn (\n\t\t\t\t<TspMap/>\n\t\t\t)\n\t\t}else if (this.props.appState === \"routing\"){\n\t\t\treturn (\n\t\t\t\t<RoutingMap/>\n\t\t\t)\n\t\t}\n\t}\n\n\n\t\n\n\trender() {\n\t\tvar position = [this.props.position.latitude, this.props.position.longitude];\n\t\treturn ( \n\t\t\t<Map className=\"map-view\" \n\t\t\t\tcenter={position}\n\t\t\t\tzoom={this.props.zoom}\n\t\t\t\tonClick={this.handleMapClick}\n\t\t\t\tref={this.mapRef} \n\t\t\t\tzoomControl={false}\n\t\t\t>\n\t\t\t<div className=\"box\">\n\t\t\t  <button className=\"btn-clear\" onClick={this.clearMarkers}>ClearMarkers</button>\n\t\t\t</div>\n\t\t\t{this.renderClickMarkers()}\n\t\t\t\t<TileLayer\n\t\t\t  \tattribution=\"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors\"\n\t\t\t  \turl=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"/>\n\t\t\t\t <Polyline positions={[{lat:42, lng: 9},{lat:43, lng: 9}]}></Polyline>\n\t\t  </Map>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (state) => {\n    return {\n\t\tappState: state.core.appState,\n\t\tposition: state.core.position,\n\t\tpath: state.core.path,\n\t\tzoom: state.core.zoom, \n\t\tmarkers: state.core.markers\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        coreActions: bindActionCreators(coreActions, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MapView);\n\n\n// WEBPACK FOOTER //\n// src/js/components/MapView.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;;;AACA;AAAA;AACA;AADA;AACA;AADA;AACA;AADA;AAQA;AACA;AACA;AAVA;AAAA;AACA;AACA;AACA;AAHA;AAIA;AACA;;;AAWA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;;;AAKA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAGA;AACA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAdA;AAiBA;;;;AArEA;AACA;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;;;;A","sourceRoot":""}